<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{{ title or "Secret" }}</title>
    <link rel="stylesheet" href="{{ url_for('static', path='secret.css') }}">
</head>
<body>
<div class="container {% if state in ['not_found','expired','revoked','limit'] %}container--compact{% endif %}">
    {% if state == "not_found" %}
    <div class="icon">â“</div>
    <h1>Secret Not Found</h1>
    <p>This secret does not exist.</p>

    {% elif state == "expired" %}
    <div class="icon">â³</div>
    <h1>Secret Expired</h1>
    <p>This secret has expired and is no longer accessible.</p>

    {% elif state == "revoked" %}
    <div class="icon">ğŸ›‘</div>
    <h1>Secret Revoked</h1>
    <p>This secret has been revoked by its owner.</p>

    {% elif state == "limit" %}
    <div class="icon">ğŸš«</div>
    <h1>Maximum Access Count Reached</h1>
    <p>This secret has been accessed the maximum number of times.</p>

    {% elif state == "password" %}
    <div class="icon">ğŸ”’</div>
    <h1>Password Protected Secret</h1>
    <p>Please enter the password to view this secret.</p>

    {% if error %}
    <div class="error" id="error-message">
        <span class="error-text">{{ error }}</span>
        <button type="button" class="close-btn" onclick="document.getElementById('error-message').style.display='none'">&times;</button>
    </div>
    {% endif %}

    <form method="post">
        <input name="password" type="password" placeholder="Password" required/>
        <button type="submit">Unlock</button>
    </form>

    {% elif state == "revealed" %}
    <div class="icon">âœ…</div>
    <h1>Secret Content</h1>

    <div class="content-box">{{ content }}</div>

    <div class="metadata">
        <div class="metadata-item">
            <div class="metadata-label">Remaining Accesses</div>
            <div class="metadata-value">{{ remaining_accesses }}</div>
        </div>
        <div class="metadata-item">
            <div class="metadata-label">Expires At</div>
            <div class="metadata-value">{{ expires_at_str }}</div>
        </div>
    </div>

    {% if remaining_accesses <= 1 %}
    <div class="warning">âš ï¸ This secret will expire soon. Make note of the content above.
    </div>
    {% endif %}

    {% else %}
    <div class="icon">âš ï¸</div>
    <h1>Something went wrong</h1>
    <p>Unknown state.</p>
    {% endif %}
</div>
</body>
</html>
